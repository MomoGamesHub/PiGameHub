<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>PiGameHub â€“ Domino Basic Test</title>
<style>
body{
  margin:0;
  font-family:Arial;
  background:#1b1b2f;
  color:#fff;
}

#login-screen,#avatar-screen,#game-screen{
  display:none;
  text-align:center;
  padding:20px;
}

input,button,select{
  padding:10px;
  margin:10px;
  font-size:16px;
}

#game-layout{
  display:grid;
  grid-template-columns:120px 1fr 120px;
  align-items:center;
  margin:20px;
}

.outer-pile{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
  min-height:220px;
}

.pile-tile{
  width:40px;
  height:20px;
  background:#555;
  border-radius:4px;
}

#board-area{
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:220px;
}

#board{
  display:flex;
  gap:8px;
}

.tile{
  width:40px;
  height:60px;
  background:#eee;
  color:#000;
  border-radius:6px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  padding:4px;
  cursor:pointer;
  font-weight:bold;
}

.hidden{
  background:#333;
  cursor:default;
}

.hand{
  display:flex;
  justify-content:center;
  gap:8px;
  margin:10px;
}

.selected{
  outline:3px solid yellow;
}

</style>
</head>

<body>

<!-- ===== Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ===== -->
<div id="login-screen">
  <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
  <input type="email" id="email" placeholder="Email"><br>
  <input type="text" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„"><br>
  <button onclick="login()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ØªØ¬Ø±ÙŠØ¨ÙŠ</button>
</div>

<!-- ===== Ø´Ø§Ø´Ø© Ø§Ø®ØªÙŠØ§Ø± Avatar ===== -->
<div id="avatar-screen">
  <h2>Ø§Ø®ØªØ± Ø´Ø®ØµÙŠØªÙƒ</h2>
  <select id="avatar-select">
    <option value="avatar1">Avatar 1 (Ù…Ø¬Ø§Ù†ÙŠ)</option>
    <option value="avatar2">Avatar 2 (Ù…Ù‚ÙÙ„)</option>
    <option value="avatar3">Avatar 3 (Ù…Ø¬Ø§Ù†ÙŠ)</option>
  </select><br>
  <button onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
</div>

<!-- ===== Ø´Ø§Ø´Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© ===== -->
<div id="game-screen">
  <h2>ğŸ« Domino</h2>

  <div id="game-layout">
    <div id="left-pile" class="outer-pile"></div>
    <div id="board-area">
      <div id="board"></div>
    </div>
    <div id="right-pile" class="outer-pile"></div>
  </div>

  <h3>ÙŠØ¯ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</h3>
  <div id="computer-hand" class="hand"></div>

  <h3>ÙŠØ¯Ùƒ</h3>
  <div id="player-hand" class="hand"></div>

  <button onclick="drawTile()">Ø§Ø³Ø­Ø¨ Ù‚Ø·Ø¹Ø©</button>
</div>

<script>
/* ===== ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ ØªØ¬Ø±ÙŠØ¨ÙŠ ===== */
function login(){
  const email=document.getElementById("email").value;
  const phone=document.getElementById("phone").value;
  if(email || phone){
    document.getElementById("login-screen").style.display="none";
    document.getElementById("avatar-screen").style.display="block";
  }else{
    alert("Ø§Ø¯Ø®Ù„ Ø§ÙŠÙ…ÙŠÙ„ Ø§Ùˆ Ø±Ù‚Ù… Ù…ÙˆØ¨Ø§ÙŠÙ„");
  }
}

/* ===== Ø§Ø®ØªÙŠØ§Ø± Avatar ===== */
function startGame(){
  const avatar=document.getElementById("avatar-select").value;
  console.log("Avatar selected:",avatar);
  document.getElementById("avatar-screen").style.display="none";
  document.getElementById("game-screen").style.display="block";
  initGame();
}

/* ===== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø¹Ø¨Ø© ===== */
let tiles=[],pile=[],board=[],left=null,right=null;
let playerHand=[],computerHand=[],selectedIndex=null;

/* ===== Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚Ø·Ø¹ ===== */
for(let i=0;i<=6;i++){
  for(let j=i;j<=6;j++){
    tiles.push([i,j]);
  }
}

/* ===== Ø®Ù„Ø· ===== */
tiles.sort(()=>Math.random()-0.5);

/* ===== ØªÙˆØ²ÙŠØ¹ ===== */
function initGame(){
  playerHand=tiles.splice(0,7);
  computerHand=tiles.splice(0,7);
  pile=tiles;

  renderAll();
}

/* ===== Ø£Ø¯ÙˆØ§Øª ===== */
function canPlay(hand){
  if(left===null) return hand.length>0;
  return hand.some(([a,b])=> a===left || a===right || b===left || b===right );
}

function play(a,b){
  if(left===null){board.push([a,b]); left=a; right=b; return true;}
  if(a===right){board.push([a,b]); right=b; return true;}
  if(b===left){board.unshift([a,b]); left=a; return true;}
  return false;
}

/* ===== Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ ===== */
function playerTurn(){
  if(selectedIndex===null){ alert("Ø§Ø®ØªØ± Ù‚Ø·Ø¹Ø©"); return; }
  let [a,b]=playerHand[selectedIndex];
  if(play(a,b)||play(b,a)){
    playerHand.splice(selectedIndex,1);
    selectedIndex=null;
    renderAll();
    setTimeout(computerTurn,500);
  }else{ alert("Ù‚Ø·Ø¹Ø© ØºÙŠØ± Ù…Ø·Ø§Ø¨Ù‚Ø©"); }
}

/* ===== Ø¯ÙˆØ± Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ===== */
function computerTurn(){
  for(let i=0;i<computerHand.length;i++){
    let [a,b]=computerHand[i];
    if(play(a,b)||play(b,a)){ computerHand.splice(i,1); renderAll(); return;}
  }
}

/* ===== Ø³Ø­Ø¨ ===== */
function drawTile(){
  if(pile.length){ playerHand.push(pile.shift()); renderAll();}
  else{ alert("Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙØ§Ø¶ÙŠ"); }
}

/* ===== Ø±Ø³Ù… ===== */
function renderTile([a,b],hidden=false){
  let d=document.createElement("div");
  d.className="tile"+(hidden?" hidden":"");
  if(!hidden){ d.innerHTML=`<div>${a}</div><div>${b}</div>`; }
  return d;
}

function renderAll(){
  boardDiv.innerHTML="";
  board.forEach(t=>boardDiv.appendChild(renderTile(t)));

  playerDiv.innerHTML="";
  playerHand.forEach((t,i)=>{
    let d=renderTile(t);
    if(i===selectedIndex) d.classList.add("selected");
    d.onclick=()=>{selectedIndex=i; renderAll();}
    playerDiv.appendChild(d);
  });

  computerDiv.innerHTML="";
  computerHand.forEach(()=>computerDiv.appendChild(renderTile([0,0],true)));

  leftPile.innerHTML="";
  rightPile.innerHTML="";
  pile.forEach(()=>{
    leftPile.appendChild(document.createElement("div")).className="pile-tile";
    rightPile.appendChild(document.createElement("div")).className="pile-tile";
  });
}

/* ===== Ø¹Ù†Ø§ØµØ± ===== */
const boardDiv=document.getElementById("board");
const playerDiv=document.getElementById("player-hand");
const computerDiv=document.getElementById("computer-hand");
const leftPile=document.getElementById("left-pile");
const rightPile=document.getElementById("right-pile");
</script>

<script>
document.getElementById("login-screen").style.display="block";
</script>

</body>
</html>
