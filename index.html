<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>PiGameHub - Domino Full Game</title>
<style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: #0f111a;
  color: #fff;
  text-align: center;
  margin: 0;
  padding: 0;
}
h2 { color: #ffd700; margin-top: 15px; }

#game-container {
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  margin:20px;
}

.player {
  text-align:center;
}

.player-hand {
  display:flex;
  gap:5px;
  margin-top:10px;
  flex-wrap:wrap;
  justify-content:center;
}

#pile {
  text-align:center;
}

#board {
  display:flex;
  justify-content:center;
  gap:12px;
  min-height:120px;
  margin:20px auto;
  padding:10px;
  background:#1c1f33;
  border-radius:15px;
  width:fit-content;
  flex-wrap:wrap;
}

.domino {
  width:70px; height:140px; border-radius:8px;
  background:#fff; border:2px solid #4ed8a2;
  display:flex; flex-direction:column; justify-content:center;
  cursor:pointer; box-shadow:2px 2px 8px rgba(0,0,0,0.4);
  transition: transform 0.2s;
}

.domino:hover { transform: scale(1.1); }

button {
  padding:10px 20px; font-size:16px; margin:5px; border:none;
  border-radius:8px; background:#4ed8a2; color:#000;
  cursor:pointer; font-weight:bold; transition: background 0.2s;
}
button:hover { background:#37b383; }

#message { margin-top:15px; font-size:16px; height:24px; }
.success { color: #4ed8a2; }
.error { color: #ff4c4c; }

</style>
</head>
<body>

<h2>ğŸ² Domino - PiGameHub Full</h2>

<div id="game-container">
  <!-- Ø§Ù„Ù„Ø§Ø¹Ø¨ -->
  <div class="player" id="player1">
    <div>ğŸ‘¤ Ø£Ù†Øª</div>
    <div id="player1-score">Ù†Ù‚Ø§Ø·: 0</div>
    <div class="player-hand" id="player1-hand"></div>
  </div>

  <!-- pile -->
  <div id="pile">
    <div>ğŸ“¦ Pile</div>
    <div id="pile-count">14</div>
  </div>

  <!-- Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± -->
  <div class="player" id="player2">
    <div>ğŸ¤– Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</div>
    <div id="player2-score">Ù†Ù‚Ø§Ø·: 0</div>
    <div class="player-hand" id="player2-hand"></div>
  </div>
</div>

<!-- Ø§Ù„Ù„ÙˆØ­Ø© -->
<div id="board"></div>

<button onclick="playerPlay()">Ù„Ø¹Ø¨ Ù‚Ø·Ø¹Ø©</button>
<button onclick="resetGame()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©</button>

<div id="message"></div>

<script>
// --- Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ---
let deck=[], playerHand=[], computerHand=[], pile=[];
let leftValue=null, rightValue=null, score=0, playerPass=false, computerPass=false;

// --- Ø¥Ù†Ø´Ø§Ø¡ Deck ---
function createDeck(){
  deck=[];
  for(let i=0;i<=6;i++){
    for(let j=i;j<=6;j++){
      deck.push([i,j]);
    }
  }
  shuffle(deck);
}

// --- Ø®Ù„Ø· ---
function shuffle(array){
  for(let i=array.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
}

// --- ØªÙˆØ²ÙŠØ¹ ---
function deal(){
  playerHand=deck.splice(0,7);
  computerHand=deck.splice(0,7);
  pile=deck.splice(0);
  document.getElementById('pile-count').textContent = pile.length;
  renderHands();
}

// --- ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ù‚Ø§Ø· ---
function updateScore(){
  document.getElementById("player1-score").textContent="Ù†Ù‚Ø§Ø·: "+score;
  document.getElementById("player2-score").textContent="Ù†Ù‚Ø§Ø·: "+(computerHand.length);
}

// --- Ø±Ø³Ø§Ù„Ø© ---
function showMessage(text,type){
  const msg=document.getElementById("message");
  msg.textContent=text;
  msg.className=type;
  setTimeout(()=>msg.textContent="",2000);
}

// --- Ø±Ø³Ù… Ø§Ù„Ù‚Ø·Ø¹Ø© ---
function renderDomino(domino){
  domino.innerHTML=`
    <div style="flex:1; display:flex; justify-content:center; align-items:center; font-size:28px; font-weight:bold; color:#333; border-bottom:2px solid #4ed8a2;">${domino.dataset.a}</div>
    <div style="flex:1; display:flex; justify-content:center; align-items:center; font-size:28px; font-weight:bold; color:#333;">${domino.dataset.b}</div>
  `;
}

// --- Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± ---
function createDominoElement(a,b){
  const domino=document.createElement("div");
  domino.className="domino";
  domino.dataset.a=a;
  domino.dataset.b=b;
  renderDomino(domino);
  domino.onclick=()=>{
    [domino.dataset.a,domino.dataset.b]=[domino.dataset.b,domino.dataset.a];
    renderDomino(domino);
    showMessage("ğŸ”„ ØªÙ… ØªØ¯ÙˆÙŠØ± Ø§Ù„Ù‚Ø·Ø¹Ø©","success");
  };
  return domino;
}

// --- Ø¹Ø±Ø¶ ÙŠØ¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ---
function renderHands(){
  const p1 = document.getElementById('player1-hand');
  const p2 = document.getElementById('player2-hand');
  p1.innerHTML = '';
  p2.innerHTML = '';
  playerHand.forEach(([a,b],idx)=>{
    const domino = createDominoElement(a,b);
    p1.appendChild(domino);
  });
  // Ø§Ù„ÙŠØ¯ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ù…Ø®ÙÙŠØ© (Ù‚Ø·Ø¹Ø© Ù…Ù‚Ù„ÙˆØ¨Ø©)
  computerHand.forEach(()=>{ 
    const domino = document.createElement("div");
    domino.className="domino"; 
    domino.style.background="#888"; 
    p2.appendChild(domino); 
  });
}

// --- Ø§Ù„Ù„Ø¹Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ù„ÙˆØ­Ø© ---
function playPiece(a,b,isPlayer){
  const domino=createDominoElement(a,b);
  const board=document.getElementById("board");
  if(leftValue===null && rightValue===null){
    leftValue=a; rightValue=b;
    board.appendChild(domino);
    if(isPlayer){score++; updateScore();}
    return true;
  }
  if(a===rightValue){
    rightValue=b;
    board.appendChild(domino);
    if(isPlayer){score++; updateScore();}
    return true;
  }
  if(b===leftValue){
    leftValue=a;
    board.prepend(domino);
    if(isPlayer){score++; updateScore();}
    return true;
  }
  return false;
}

// --- Ø­Ø±ÙƒØ© Ø§Ù„Ù„Ø§Ø¹Ø¨ ---
function playerPlay(){
  if(playerHand.length===0 && pile.length===0){
    playerPass=true;
    showMessage("âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚Ø·Ø¹ ØµØ§Ù„Ø­Ø©ØŒ ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¯ÙˆØ±","error");
    setTimeout(computerPlay,500);
    checkEnd();
    return;
  }
  let played=false;
  for(let i=0;i<playerHand.length;i++){
    const [a,b]=playerHand[i];
    if(playPiece(a,b,true) || playPiece(b,a,true)){
      playerHand.splice(i,1);
      played=true; 
      break;
    }
  }
  if(!played && pile.length>0){
    // Ø³Ø­Ø¨ Ù…Ù† pile
    playerHand.push(pile.shift());
    showMessage("ğŸ“¦ Ø³Ø­Ø¨Øª Ù‚Ø·Ø¹Ø© Ù…Ù† pile","success");
    renderHands();
    setTimeout(playerPlay,500);
    return;
  }
  if(!played){playerPass=true; showMessage("âŒ ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¯ÙˆØ±","error");}
  renderHands();
  setTimeout(computerPlay,500);
  checkEnd();
}

// --- AI Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ---
function computerPlay(){
  if(computerHand.length===0 && pile.length===0){
    computerPass=true;
    showMessage("ğŸ¤– Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙŠÙ…Ø±Ø± Ø§Ù„Ø¯ÙˆØ±","error");
    checkEnd();
    return;
  }
  let played=false;
  for(let i=0;i<computerHand.length;i++){
    const [a,b]=computerHand[i];
    if(playPiece(a,b,false) || playPiece(b,a,false)){
      computerHand.splice(i,1);
      played=true;
      showMessage("ğŸ¤– Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ù„Ø¹Ø¨ Ù‚Ø·Ø¹Ø©","success");
      break;
    }
  }
  if(!played && pile.length>0){
    computerHand.push(pile.shift());
    showMessage("ğŸ¤– Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ø³Ø­Ø¨ Ù‚Ø·Ø¹Ø© Ù…Ù† pile","success");
    renderHands();
    setTimeout(computerPlay,500);
    return;
  }
  if(!played){computerPass=true; showMessage("ğŸ¤– Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙŠÙ…Ø±Ø± Ø§Ù„Ø¯ÙˆØ±","error");}
  renderHands();
  checkEnd();
}

// --- ØªØ­Ù‚Ù‚ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¬ÙˆÙ„Ø© ---
function checkEnd(){
  if((playerHand.length===0 || playerPass) && (computerHand.length===0 || computerPass)){
    let msg="ğŸ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù†ØªÙ‡Øª! ";
    if(playerHand.length<computerHand.length){ msg+="ğŸ‰ ÙØ§Ø² Ø§Ù„Ù„Ø§Ø¹Ø¨!"; score+=10; }
    else if(computerHand.length<playerHand.length){ msg+="ğŸ¤– ÙØ§Ø² Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±!"; }
    else msg+="ØªØ¹Ø§Ø¯Ù„!";
    showMessage(msg,"success");
    playerPass=false; computerPass=false;
  }
}

// --- Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© ---
function resetGame(){
  document.getElementById("board").innerHTML="";
  leftValue=null; rightValue=null; score=0;
  playerPass=false; computerPass=false;
  createDeck(); deal(); updateScore();
  renderHands();
  showMessage("ğŸ” Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø© â€” Ø§Ù„Ù†Ù‚Ø§Ø· ØµÙØ±","success");
}

// --- Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© ---
createDeck(); deal(); updateScore(); renderHands();
</script>
</body>
</html>
