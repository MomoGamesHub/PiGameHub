<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Domino Full â€“ Integrated Version</title>

<style>
body{
  margin:0;
  background:#0e0f1a;
  color:#fff;
  font-family:Arial, sans-serif;
  text-align:center;
}

/* ===== Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ ===== */
#computer-zone,#player-zone{
  display:flex;
  justify-content:center;
  gap:8px;
  padding:14px;
}

#computer-zone{
  background:#1a1c2e;
  border-bottom:2px solid #333;
}

#player-zone{
  background:#1a1c2e;
  border-top:2px solid #333;
}

/* ===== Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø·Ø§ÙˆÙ„Ø© ===== */
#table-area{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:20px;
  margin:30px auto;
}

/* ===== Ø§Ù„Ø·Ø§ÙˆÙ„Ø© ===== */
#board{
  min-height:180px;
  max-width:70%;
  padding:20px;
  display:flex;
  align-items:center;
  gap:6px;
  flex-wrap:nowrap;
  overflow-x:auto;
  background:#10121f;
  border-radius:16px;
}

/* ===== Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø³Ø­Ø¨ ===== */
.side-pile{
  width:70px;
  min-height:180px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
}

/* ===== Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ†Ùˆ ===== */
.domino{
  width:60px;
  height:120px;
  background:#fff;
  color:#000;
  border-radius:8px;
  border:2px solid #4ed8a2;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  cursor:pointer;
  transition:.2s;
}

.domino div{
  font-size:26px;
  font-weight:bold;
  padding:6px;
}

.domino.selected{
  box-shadow:0 0 15px 4px #ffd700;
  transform:scale(1.1);
}

.domino.back{
  background:linear-gradient(135deg,#555,#222);
  border:2px solid #888;
  cursor:default;
}

/* ===== Ø£Ø²Ø±Ø§Ø± ===== */
button{
  margin:8px;
  padding:10px 18px;
  font-size:16px;
  border-radius:8px;
  border:none;
  cursor:pointer;
  background:#4ed8a2;
  color:#000;
  font-weight:bold;
}
</style>
</head>

<body>

<!-- ===== Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ===== -->
<div id="computer-zone"></div>
<div style="padding:8px;background:#14162a">
  ğŸ¤– Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± | Ù†Ù‚Ø§Ø·: <span id="computerScore">0</span>
</div>

<!-- ===== Ø§Ù„Ø·Ø§ÙˆÙ„Ø© + Ø§Ù„Ø³Ø­Ø¨ ===== -->
<div id="table-area">

  <div id="left-pile" class="side-pile"></div>

  <div id="board"></div>

  <div id="right-pile" class="side-pile"></div>

</div>

<div style="padding:8px;background:#14162a">
  ğŸ“¦ Pile: <span id="pileCount">0</span>
</div>

<!-- ===== Ø§Ù„Ù„Ø§Ø¹Ø¨ ===== -->
<div style="padding:8px;background:#14162a">
  ğŸ‘¤ Ø£Ù†Øª | Ù†Ù‚Ø§Ø·: <span id="playerScore">0</span>
</div>
<div id="player-zone"></div>

<!-- ===== Ø§Ù„Ø£Ø²Ø±Ø§Ø± ===== -->
<button onclick="playerTurn()">Ù„Ø¹Ø¨ Ø§Ù„Ù‚Ø·Ø¹Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©</button>
<button onclick="drawFromPile()">Ø§Ø³Ø­Ø¨ Ù‚Ø·Ø¹Ø©</button>
<button onclick="resetGame()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©</button>

<script>
/* ===== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ===== */
let deck=[], playerHand=[], computerHand=[], pile=[];
let left=null, right=null;
let selectedIndex=null;
let playerScore=0, computerScore=0;

/* ===== Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¯ÙÙƒ ===== */
function createDeck(){
  deck=[];
  for(let i=0;i<=6;i++){
    for(let j=i;j<=6;j++){
      deck.push([i,j]);
    }
  }
  shuffle(deck);
}

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    let j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
}

/* ===== ØªÙˆØ²ÙŠØ¹ ===== */
function deal(){
  playerHand=deck.splice(0,7);
  computerHand=deck.splice(0,7);
  pile=deck.splice(0);
  updatePile();
  renderAll();
}

/* ===== Ø±Ø³Ù… ===== */
function renderAll(){
  renderHands();
  renderSidePiles();
  updateScore();
}

function renderHands(){
  const p=document.getElementById("player-zone");
  const c=document.getElementById("computer-zone");
  p.innerHTML="";
  c.innerHTML="";

  playerHand.forEach(([a,b],i)=>{
    const d=createDomino(a,b);
    if(i===selectedIndex) d.classList.add("selected");
    d.onclick=()=>{selectedIndex=i;renderHands();};
    p.appendChild(d);
  });

  computerHand.forEach(()=>{
    const d=document.createElement("div");
    d.className="domino back";
    c.appendChild(d);
  });
}

function renderSidePiles(){
  const leftPile=document.getElementById("left-pile");
  const rightPile=document.getElementById("right-pile");
  leftPile.innerHTML="";
  rightPile.innerHTML="";

  computerHand.slice(0,3).forEach(()=>{
    const d=document.createElement("div");
    d.className="domino back";
    leftPile.appendChild(d);
  });

  playerHand.slice(0,3).forEach(()=>{
    const d=document.createElement("div");
    d.className="domino back";
    rightPile.appendChild(d);
  });
}

/* ===== Ø¯ÙˆÙ…ÙŠÙ†Ùˆ ===== */
function createDomino(a,b){
  const d=document.createElement("div");
  d.className="domino";
  d.innerHTML=`<div>${a}</div><div>${b}</div>`;
  return d;
}

/* ===== Ø§Ù„Ù„Ø¹Ø¨ ===== */
function play(a,b){
  const board=document.getElementById("board");
  const d=createDomino(a,b);

  if(left===null){
    left=a; right=b;
    board.appendChild(d);
    return true;
  }
  if(a===right){
    right=b; board.appendChild(d); return true;
  }
  if(b===left){
    left=a; board.prepend(d); return true;
  }
  return false;
}

/* ===== Ø£Ø¯ÙˆØ§Ø± ===== */
function playerTurn(){
  if(selectedIndex===null){alert("Ø§Ø®ØªØ§Ø± Ù‚Ø·Ø¹Ø©");return;}
  let [a,b]=playerHand[selectedIndex];

  if(play(a,b)||play(b,a)){
    playerHand.splice(selectedIndex,1);
    playerScore++;
    selectedIndex=null;
    renderAll();
    setTimeout(computerTurn,500);
  }else alert("Ù‚Ø·Ø¹Ø© ØºÙŠØ± ØµØ§Ù„Ø­Ø©");
}

function computerTurn(){
  for(let i=0;i<computerHand.length;i++){
    let [a,b]=computerHand[i];
    if(play(a,b)||play(b,a)){
      computerHand.splice(i,1);
      computerScore++;
      renderAll();
      return;
    }
  }
  if(pile.length){
    computerHand.push(pile.shift());
    updatePile();
    renderAll();
  }
}

/* ===== Ø³Ø­Ø¨ ===== */
function drawFromPile(){
  if(pile.length){
    playerHand.push(pile.shift());
    updatePile();
    renderAll();
  }else alert("Pile ÙØ§Ø¶ÙŠ");
}

/* ===== ØªØ­Ø¯ÙŠØ« ===== */
function updatePile(){
  document.getElementById("pileCount").textContent=pile.length;
}
function updateScore(){
  document.getElementById("playerScore").textContent=playerScore;
  document.getElementById("computerScore").textContent=computerScore;
}

/* ===== Ø¥Ø¹Ø§Ø¯Ø© ===== */
function resetGame(){
  document.getElementById("board").innerHTML="";
  left=null; right=null;
  selectedIndex=null;
  playerScore=computerScore=0;
  createDeck(); deal();
}

/* ===== ØªØ´ØºÙŠÙ„ ===== */
createDeck();
deal();
</script>

</body>
</html>
