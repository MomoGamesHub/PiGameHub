<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>PiGameHub â€“ Domino</title>

<style>
body {
  margin: 0;
  background: #0e0f1a;
  color: #fff;
  font-family: Arial, sans-serif;
  text-align: center;
}

/* ====== Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù„Ø¹Ø¨ ====== */
#computer-zone, #player-zone {
  display: flex;
  justify-content: center;
  gap: 8px;
  padding: 12px;
}

#computer-zone {
  background: #1a1c2e;
  border-bottom: 2px solid #333;
}

#player-zone {
  background: #1a1c2e;
  border-top: 2px solid #333;
}

#board {
  min-height: 140px;
  padding: 15px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  background: #10121f;
}

/* ====== Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ†Ùˆ ====== */
.domino {
  width: 60px;
  height: 120px;
  background: #fff;
  color: #000;
  border-radius: 8px;
  border: 2px solid #4ed8a2;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  cursor: pointer;
}

.domino div {
  font-size: 26px;
  font-weight: bold;
  line-height: 1;
  padding: 6px;
}

/* Ø¯ÙˆÙ…ÙŠÙ†Ùˆ Ù…Ù‚Ù„ÙˆØ¨ (Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±) */
.domino.back {
  background: linear-gradient(135deg,#555,#222);
  border: 2px solid #888;
  cursor: default;
}

/* ====== Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ====== */
#info {
  padding: 10px;
  background: #14162a;
}

button {
  margin: 8px;
  padding: 10px 18px;
  font-size: 16px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  background: #4ed8a2;
  color: #000;
  font-weight: bold;
}
</style>
</head>

<body>

<div id="computer-zone"></div>

<div id="info">
  ğŸ¤– Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± | ğŸ“¦ Pile: <span id="pileCount">0</span>
</div>

<div id="board"></div>

<div id="info">
  ğŸ‘¤ Ø£Ù†Øª
</div>

<div id="player-zone"></div>

<button onclick="playerTurn()">Ù„Ø¹Ø¨ Ù‚Ø·Ø¹Ø©</button>
<button onclick="resetGame()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©</button>

<script>
/* ====== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ====== */
let deck=[], playerHand=[], computerHand=[], pile=[];
let left=null, right=null;

/* ====== Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¯ÙÙƒ ====== */
function createDeck(){
  deck=[];
  for(let i=0;i<=6;i++){
    for(let j=i;j<=6;j++){
      deck.push([i,j]);
    }
  }
  shuffle(deck);
}

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    let j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
}

/* ====== ØªÙˆØ²ÙŠØ¹ ====== */
function deal(){
  playerHand=deck.splice(0,7);
  computerHand=deck.splice(0,7);
  pile=deck.splice(0);
  updatePile();
  renderHands();
}

/* ====== Ø±Ø³Ù… Ø§Ù„Ø£ÙŠØ§Ø¯ÙŠ ====== */
function renderHands(){
  const pZone=document.getElementById("player-zone");
  const cZone=document.getElementById("computer-zone");
  pZone.innerHTML="";
  cZone.innerHTML="";

  // ÙŠØ¯ Ø§Ù„Ù„Ø§Ø¹Ø¨
  playerHand.forEach(([a,b],i)=>{
    const d=createDomino(a,b);
    d.onclick=()=>rotate(d);
    pZone.appendChild(d);
  });

  // ÙŠØ¯ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± (Ù…Ù‚Ù„ÙˆØ¨Ø©)
  computerHand.forEach(()=>{
    const d=document.createElement("div");
    d.className="domino back";
    cZone.appendChild(d);
  });
}

/* ====== Ø¥Ù†Ø´Ø§Ø¡ Ø¯ÙˆÙ…ÙŠÙ†Ùˆ ====== */
function createDomino(a,b){
  const d=document.createElement("div");
  d.className="domino";
  d.dataset.a=a;
  d.dataset.b=b;
  draw(d);
  return d;
}

function draw(d){
  d.innerHTML=`<div>${d.dataset.a}</div><div>${d.dataset.b}</div>`;
}

function rotate(d){
  [d.dataset.a,d.dataset.b]=[d.dataset.b,d.dataset.a];
  draw(d);
}

/* ====== Ø§Ù„Ù„Ø¹Ø¨ ====== */
function play(a,b){
  const board=document.getElementById("board");
  const d=createDomino(a,b);

  if(left===null){
    left=a; right=b;
    board.appendChild(d);
    return true;
  }
  if(a===right){ right=b; board.appendChild(d); return true; }
  if(b===left){ left=a; board.prepend(d); return true; }
  return false;
}

/* ====== Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ ====== */
function playerTurn(){
  for(let i=0;i<playerHand.length;i++){
    let [a,b]=playerHand[i];
    if(play(a,b)||play(b,a)){
      playerHand.splice(i,1);
      renderHands();
      setTimeout(computerTurn,500);
      return;
    }
  }
  if(pile.length){
    playerHand.push(pile.shift());
    updatePile();
    renderHands();
  }
}

/* ====== Ø¯ÙˆØ± Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ====== */
function computerTurn(){
  for(let i=0;i<computerHand.length;i++){
    let [a,b]=computerHand[i];
    if(play(a,b)||play(b,a)){
      computerHand.splice(i,1);
      renderHands();
      return;
    }
  }
  if(pile.length){
    computerHand.push(pile.shift());
    updatePile();
    renderHands();
  }
}

/* ====== pile ====== */
function updatePile(){
  document.getElementById("pileCount").textContent=pile.length;
}

/* ====== Ø¥Ø¹Ø§Ø¯Ø© ====== */
function resetGame(){
  document.getElementById("board").innerHTML="";
  left=null; right=null;
  createDeck(); deal();
}

/* ====== ØªØ´ØºÙŠÙ„ ====== */
createDeck();
deal();
</script>

</body>
</html>
