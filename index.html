<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>PiGameHub - Web3 Ready</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    margin:0; padding:0;
    background: radial-gradient(circle at top, #0a0a1e, #000);
    font-family: Arial, sans-serif;
    color: #00ffcc;
    text-align:center;
  }
  h1 {margin-top:20px; font-size:28px;}
  p {color:#0f0; margin-top:5px;}
  .cards {
    display:flex; flex-wrap:wrap; justify-content:center;
    max-width:960px; margin:30px auto;
  }
  .card {
    width:70px; height:120px; background:linear-gradient(145deg,#222,#111);
    border-radius:10px; margin:10px;
    box-shadow:0 8px 15px rgba(0,0,0,0.6);
    cursor:pointer; transition: transform 0.3s, box-shadow 0.3s, background 0.3s;
    display:flex; align-items:center; justify-content:center;
    font-size:18px; color:#00ffcc;
  }
  .card:hover {transform:translateY(-10px) rotateX(10deg); box-shadow:0 15px 25px rgba(0,255,204,0.4);}
  .card.active {animation:bounce 0.5s forwards; background:linear-gradient(145deg,#0ff,#00ffcc); box-shadow:0 15px 30px rgba(0,255,204,0.7);}
  @keyframes bounce {0%{transform:translateY(0);}50%{transform:translateY(-30px);}100%{transform:translateY(0);}}
  #lastCard {margin-top:20px; font-size:18px; color:#0f0;}
</style>
</head>
<body>

<h1>ğŸ® PiGameHub</h1>
<p>ÙˆØ§Ø¬Ù‡Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© + Firebase + Web3 Ready</p>

<div class="cards" id="cards"></div>
<div id="lastCard">Ø¢Ø®Ø± ÙƒØ§Ø±Øª Ø¶ØºØ·Øª Ø¹Ù„ÙŠÙ‡: -</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-analytics.js";
import { getDatabase, ref, set, push, get, child } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-database.js";

// ================= Firebase Config =================
const firebaseConfig = {
  apiKey: "AIzaSyCn581B_OaIYc7crz3V2Lrjf9WOtJdRe60",
  authDomain: "pigameshub.firebaseapp.com",
  databaseURL: "https://pigameshub-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "pigameshub",
  storageBucket: "pigameshub.firebasestorage.app",
  messagingSenderId: "977510299690",
  appId: "1:977510299690:web:2e146161feeeefb5486b53",
  measurementId: "G-CGKZZK48G4"
};

const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
const db = getDatabase(app);
console.log("ğŸ”¥ Firebase Connected Successfully");

// ================= Cards UI =================
const cardsContainer = document.getElementById("cards");
const lastCardText = document.getElementById("lastCard");

for(let i=1; i<=28; i++){
  const card = document.createElement("div");
  card.className = "card";
  card.innerText = i;

  card.onclick = async () => {
    // Animation
    card.classList.add("active");
    setTimeout(()=>card.classList.remove("active"),500);

    // Alert
    alert(`Ø¶ØºØ·Øª Ø¹Ù„Ù‰ Ø§Ù„ÙƒØ§Ø±Øª Ø±Ù‚Ù…: ${i}`);

    // Timestamp
    const timestamp = new Date().toLocaleString();

    // Save in Firebase
    await set(ref(db, 'lastClickedCard'), { number: i, time: timestamp });
    await push(ref(db, 'clickHistory'), { number: i, time: timestamp });

    // Update UI
    const snapshot = await get(child(ref(db), 'lastClickedCard'));
    if(snapshot.exists()){
      const data = snapshot.val();
      lastCardText.innerText = `Ø¢Ø®Ø± ÙƒØ§Ø±Øª Ø¶ØºØ·Øª Ø¹Ù„ÙŠÙ‡: ${data.number} (Ø§Ù„ÙˆÙ‚Øª: ${data.time})`;
    }
  };
  cardsContainer.appendChild(card);
}

// Load last clicked card on page load
(async()=>{
  const snapshot = await get(child(ref(db),'lastClickedCard'));
  if(snapshot.exists()){
    const data = snapshot.val();
    lastCardText.innerText = `Ø¢Ø®Ø± ÙƒØ§Ø±Øª Ø¶ØºØ·Øª Ø¹Ù„ÙŠÙ‡: ${data.number} (Ø§Ù„ÙˆÙ‚Øª: ${data.time})`;
  }
})();
</script>
</body>
</html>
