<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Domino Full â€“ Chrome Test</title>

<style>
body{
  margin:0;
  background:#0e0f1a;
  color:#fff;
  font-family:Arial, sans-serif;
  text-align:center;
}

/* ===== Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ ===== */
#computer-zone,#player-zone{
  display:flex;
  justify-content:center;
  gap:8px;
  padding:14px;
}

#computer-zone{
  background:#1a1c2e;
  border-bottom:2px solid #333;
  margin-bottom:30px;
}

#player-zone{
  background:#1a1c2e;
  border-top:2px solid #333;
  margin-top:30px;
}

/* ===== Ø§Ù„Ø·Ø§ÙˆÙ„Ø© ===== */
#board{
  min-height:180px;
  margin:40px auto;
  padding:20px;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
  background:#10121f;
  border-radius:16px;
}

/* ===== Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ†Ùˆ ===== */
.domino{
  width:60px;
  height:120px;
  background:#fff;
  color:#000;
  border-radius:8px;
  border:2px solid #4ed8a2;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  cursor:pointer;
  transition:.2s;
}

.domino div{
  font-size:26px;
  font-weight:bold;
  padding:6px;
}

/* Ù‚Ø·Ø¹Ø© Ù…Ø®ØªØ§Ø±Ø© */
.domino.selected{
  box-shadow:0 0 15px 4px #ffd700;
  transform:scale(1.1);
}

/* ÙƒÙ…Ø¨ÙŠÙˆØªØ± */
.domino.back{
  background:linear-gradient(135deg,#555,#222);
  border:2px solid #888;
  cursor:default;
}

/* ===== Ø£Ø²Ø±Ø§Ø± ===== */
button{
  margin:8px;
  padding:10px 18px;
  font-size:16px;
  border-radius:8px;
  border:none;
  cursor:pointer;
  background:#4ed8a2;
  color:#000;
  font-weight:bold;
}
</style>
</head>

<body>

<div id="computer-zone"></div>

<div style="padding:10px;background:#14162a">
  ğŸ¤– Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± | ğŸ“¦ Pile: <span id="pileCount">0</span>
</div>

<div id="board"></div>

<div style="padding:10px;background:#14162a">
  ğŸ‘¤ Ø£Ù†Øª
</div>

<div id="player-zone"></div>

<!-- ===== Ø§Ù„Ø£Ø²Ø±Ø§Ø± ===== -->
<button onclick="playerTurn()">Ù„Ø¹Ø¨ Ø§Ù„Ù‚Ø·Ø¹Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©</button>
<button onclick="drawFromPile()">Ø§Ø³Ø­Ø¨ Ù‚Ø·Ø¹Ø©</button>
<button onclick="resetGame()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©</button>

<script>
/* ===== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ===== */
let deck=[], playerHand=[], computerHand=[], pile=[];
let left=null, right=null;
let selectedIndex=null;

/* ===== Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¯ÙÙƒ ===== */
function createDeck(){
  deck=[];
  for(let i=0;i<=6;i++){
    for(let j=i;j<=6;j++){
      deck.push([i,j]);
    }
  }
  shuffle(deck);
}

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    let j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
}

/* ===== ØªÙˆØ²ÙŠØ¹ ===== */
function deal(){
  playerHand=deck.splice(0,7);
  computerHand=deck.splice(0,7);
  pile=deck.splice(0);
  updatePile();
  renderHands();
}

/* ===== Ø±Ø³Ù… Ø§Ù„Ø£ÙŠØ§Ø¯ÙŠ ===== */
function renderHands(){
  const p=document.getElementById("player-zone");
  const c=document.getElementById("computer-zone");
  p.innerHTML="";
  c.innerHTML="";

  playerHand.forEach(([a,b],i)=>{
    const d=createDomino(a,b);
    if(i===selectedIndex) d.classList.add("selected");
    d.onclick=()=>{
      selectedIndex=i;
      renderHands();
    };
    p.appendChild(d);
  });

  computerHand.forEach(()=>{
    const d=document.createElement("div");
    d.className="domino back";
    c.appendChild(d);
  });
}

/* ===== Ø¯ÙˆÙ…ÙŠÙ†Ùˆ ===== */
function createDomino(a,b){
  const d=document.createElement("div");
  d.className="domino";
  d.dataset.a=a;
  d.dataset.b=b;
  draw(d);
  return d;
}

function draw(d){
  d.innerHTML=`<div>${d.dataset.a}</div><div>${d.dataset.b}</div>`;
}

/* ===== Ø§Ù„Ù„Ø¹Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§ÙˆÙ„Ø© ===== */
function play(a,b){
  const board=document.getElementById("board");
  const d=createDomino(a,b);

  if(left===null){
    left=a; right=b;
    board.appendChild(d);
    return true;
  }
  if(a===right){
    right=b;
    board.appendChild(d);
    return true;
  }
  if(b===left){
    left=a;
    board.prepend(d);
    return true;
  }
  return false;
}

/* ===== Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ ===== */
function playerTurn(){
  if(selectedIndex===null){
    alert("Ø§Ø®ØªØ§Ø± Ù‚Ø·Ø¹Ø© Ø§Ù„Ø£ÙˆÙ„ ğŸ‘†");
    return;
  }

  let [a,b]=playerHand[selectedIndex];

  if(play(a,b)||play(b,a)){
    playerHand.splice(selectedIndex,1);
    selectedIndex=null;
    renderHands();
    setTimeout(computerTurn,500);
  }else{
    alert("Ø§Ù„Ù‚Ø·Ø¹Ø© Ø¯ÙŠ Ù…Ø´ ØµØ§Ù„Ø­Ø© âŒ");
  }
}

/* ===== Ø²Ø± Ø§Ù„Ø³Ø­Ø¨ Ø§Ù„ÙŠØ¯ÙˆÙŠ ===== */
function drawFromPile(){
  if(pile.length>0){
    playerHand.push(pile.shift());
    updatePile();
    renderHands();
  } else {
    alert("Ù…ÙÙŠØ´ Ù‚Ø·Ø¹ ÙÙŠ pile!");
  }
}

/* ===== Ø¯ÙˆØ± Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ===== */
function computerTurn(){
  for(let i=0;i<computerHand.length;i++){
    let [a,b]=computerHand[i];
    if(play(a,b)||play(b,a)){
      computerHand.splice(i,1);
      renderHands();
      return;
    }
  }
  if(pile.length){
    computerHand.push(pile.shift());
    updatePile();
    renderHands();
  }
}

/* ===== pile ===== */
function updatePile(){
  document.getElementById("pileCount").textContent=pile.length;
}

/* ===== Ø¥Ø¹Ø§Ø¯Ø© ===== */
function resetGame(){
  document.getElementById("board").innerHTML="";
  left=null; right=null;
  selectedIndex=null;
  createDeck();
  deal();
}

/* ===== ØªØ´ØºÙŠÙ„ ===== */
createDeck();
deal();
</script>

</body>
</html>
