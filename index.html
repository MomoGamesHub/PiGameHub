<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>PiGameHub â€“ Domino Full Pro</title>
<style>
body{
  margin:0;
  font-family:Arial;
  background:#1b1b2f;
  color:#fff;
}
.screen{display:none;text-align:center;padding:20px;}
input,button,select{padding:10px;margin:10px;font-size:16px;cursor:pointer;}
#game-layout{display:grid;grid-template-columns:120px 1fr 120px;align-items:center;margin:20px;}
.outer-pile{display:flex;flex-direction:column;align-items:center;gap:6px;min-height:220px;}
.pile-tile{width:40px;height:20px;background:#555;border-radius:4px;}
#board-area{display:flex;justify-content:center;align-items:center;min-height:220px;flex-direction:column;}
#board{display:flex;flex-direction:column;gap:8px;align-items:center;}
.tile{width:40px;height:60px;background:#eee;color:#000;border-radius:6px;display:flex;flex-direction:column;justify-content:space-between;padding:4px;cursor:pointer;font-weight:bold;transition:transform 0.2s;}
.tile.selected{outline:3px solid yellow;transform:scale(1.1);}
.tile.hidden{background:#333;cursor:default;}
.hand{display:flex;justify-content:center;gap:8px;margin:10px;}
.avatar-card{display:inline-block;width:80px;height:80px;background:#444;border-radius:8px;margin:10px;cursor:pointer;transition:transform 0.2s;display:flex;justify-content:center;align-items:center;color:#fff;font-weight:bold;}
.avatar-card.selected{border:3px solid yellow;transform:scale(1.1);}
button{padding:10px 20px;font-size:16px;margin:10px auto;display:block;cursor:pointer;}
</style>
</head>
<body>

<!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div id="login-screen" class="screen">
  <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
  <input type="email" id="email" placeholder="Email"><br>
  <input type="text" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„"><br>
  <button onclick="login()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ØªØ¬Ø±ÙŠØ¨ÙŠ</button>
</div>

<!-- Ø´Ø§Ø´Ø© Ø§Ø®ØªÙŠØ§Ø± Avatar -->
<div id="avatar-screen" class="screen">
  <h2>Ø§Ø®ØªØ± Ø´Ø®ØµÙŠØªÙƒ</h2>
  <div id="avatar-container"></div>
  <button onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
</div>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© -->
<div id="game-screen" class="screen">
  <h2>ğŸ« Domino</h2>
  <div id="game-layout">
    <div id="left-pile" class="outer-pile"></div>
    <div id="board-area">
      <div id="board"></div>
    </div>
    <div id="right-pile" class="outer-pile"></div>
  </div>

  <h3>ÙŠØ¯ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</h3>
  <div id="computer-hand" class="hand"></div>

  <h3>ÙŠØ¯Ùƒ</h3>
  <div id="player-hand" class="hand"></div>

  <button onclick="drawTile()">Ø§Ø³Ø­Ø¨ Ù‚Ø·Ø¹Ø©</button>
</div>

<script>
// ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ ØªØ¬Ø±ÙŠØ¨ÙŠ
function login(){
  const email=document.getElementById("email").value;
  const phone=document.getElementById("phone").value;
  if(email || phone){
    document.getElementById("login-screen").style.display="none";
    document.getElementById("avatar-screen").style.display="block";
    setupAvatars();
  }else{alert("Ø§Ø¯Ø®Ù„ Ø§ÙŠÙ…ÙŠÙ„ Ø§Ùˆ Ø±Ù‚Ù… Ù…ÙˆØ¨Ø§ÙŠÙ„");}
}

// Ø¥Ø¹Ø¯Ø§Ø¯ Avatars ÙˆØ§Ù‚Ø¹ÙŠØ©
let selectedAvatar=null;
function setupAvatars(){
  const avatars=["ğŸ™‚","ğŸ˜","ğŸ§‘"]; // Ø±Ù…ÙˆØ² ØªÙ…Ø«Ù„ Avatars Ø­Ù‚ÙŠÙ‚ÙŠØ©
  const container=document.getElementById("avatar-container");
  container.innerHTML="";
  avatars.forEach(a=>{
    let card=document.createElement("div");
    card.className="avatar-card";
    card.innerText=a;
    card.onclick=()=>{
      document.querySelectorAll(".avatar-card").forEach(c=>c.classList.remove("selected"));
      card.classList.add("selected");
      selectedAvatar=a;
    };
    container.appendChild(card);
  });
}

// Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
function startGame(){
  if(!selectedAvatar){alert("Ø§Ø®ØªØ± Ø´Ø®ØµÙŠØªÙƒ");return;}
  console.log("Avatar selected:",selectedAvatar);
  document.getElementById("avatar-screen").style.display="none";
  document.getElementById("game-screen").style.display="block";
  initGame();
}

// Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
let tiles=[],pile=[],board=[],left=null,right=null;
let playerHand=[],computerHand=[],selectedIndex=null;

// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚Ø·Ø¹
for(let i=0;i<=6;i++){
  for(let j=i;j<=6;j++){ tiles.push([i,j]); }
}

// Ø®Ù„Ø·
tiles.sort(()=>Math.random()-0.5);

// ØªÙˆØ²ÙŠØ¹
function initGame(){
  playerHand=tiles.splice(0,7);
  computerHand=tiles.splice(0,7);
  pile=tiles;
  renderAll();
}

// Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù„Ø¹Ø¨
function canPlay(hand){
  if(left===null) return hand.length>0;
  return hand.some(([a,b])=> a===left || a===right || b===left || b===right );
}

function play(a,b){
  if(left===null){board.push([a,b]); left=a; right=b; return true;}
  if(a===right){board.push([a,b]); right=b; return true;}
  if(b===left){board.unshift([a,b]); left=a; return true;}
  return false;
}

// Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨
function playerTurn(idx){
  let [a,b]=playerHand[idx];
  if(play(a,b)||play(b,a)){
    playerHand.splice(idx,1);
    selectedIndex=null;
    renderAll();
    setTimeout(computerTurn,500);
  }else{ alert("Ù‚Ø·Ø¹Ø© ØºÙŠØ± Ù…Ø·Ø§Ø¨Ù‚Ø©"); }
}

// Ø¯ÙˆØ± Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±
function computerTurn(){
  for(let i=0;i<computerHand.length;i++){
    let [a,b]=computerHand[i];
    if(play(a,b)||play(b,a)){ computerHand.splice(i,1); renderAll(); return; }
  }
}

// Ø³Ø­Ø¨
function drawTile(){
  if(pile.length){
    const t=pile.shift();
    playerHand.push(t);
    renderAll();
  }else{ alert("Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙØ§Ø¶ÙŠ"); }
}

// Ø±Ø³Ù… Ø§Ù„Ù‚Ø·Ø¹
function renderTile([a,b],hidden=false){
  let d=document.createElement("div");
  d.className="tile"+(hidden?" hidden":"");
  if(!hidden){ d.innerHTML=`<div>${a}</div><div>${b}</div>`; }
  return d;
}

function renderAll(){
  boardDiv.innerHTML="";
  board.forEach(t=>boardDiv.appendChild(renderTile(t)));

  playerDiv.innerHTML="";
  playerHand.forEach((t,i)=>{
    let d=renderTile(t);
    d.onclick=()=>playerTurn(i);
    playerDiv.appendChild(d);
  });

  computerDiv.innerHTML="";
  computerHand.forEach(()=>computerDiv.appendChild(renderTile([0,0],true)));

  leftPile.innerHTML="";
  rightPile.innerHTML="";
  pile.forEach(()=>{
    leftPile.appendChild(document.createElement("div")).className="pile-tile";
    rightPile.appendChild(document.createElement("div")).className="pile-tile";
  });
}

// Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù„Ø¹Ø¨Ø©
const boardDiv=document.getElementById("board");
const playerDiv=document.getElementById("player-hand");
const computerDiv=document.getElementById("computer-hand");
const leftPile=document.getElementById("left-pile");
const rightPile=document.getElementById("right-pile");

// Ø§Ø¸Ù‡Ø§Ø± Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
document.getElementById("login-screen").style.display="block";
</script>
</body>
</html>
