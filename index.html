<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>PiGameHub â€“ Domino</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#1b1b2f;
  color:#fff;
}

#game-layout{
  display:grid;
  grid-template-columns:120px 1fr 120px;
  align-items:center;
  margin:20px;
}

.outer-pile{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
}

.pile-tile{
  width:40px;
  height:20px;
  background:#555;
  border-radius:4px;
}

#board-area{
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:220px;
}

#board{
  display:flex;
  gap:8px;
}

.tile{
  width:40px;
  height:60px;
  background:#eee;
  color:#000;
  border-radius:6px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  padding:4px;
  cursor:pointer;
  font-weight:bold;
}

.hidden{
  background:#333;
  cursor:default;
}

.hand{
  display:flex;
  justify-content:center;
  gap:8px;
  margin:10px;
}

.selected{
  outline:3px solid yellow;
}

button{
  padding:10px 20px;
  font-size:16px;
  margin:10px auto;
  display:block;
}
</style>
</head>

<body>

<h2 style="text-align:center">ğŸ« Domino</h2>

<div id="game-layout">
  <div id="left-pile" class="outer-pile"></div>

  <div id="board-area">
    <div id="board"></div>
  </div>

  <div id="right-pile" class="outer-pile"></div>
</div>

<h3 style="text-align:center">ÙŠØ¯ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</h3>
<div id="computer-hand" class="hand"></div>

<h3 style="text-align:center">ÙŠØ¯Ùƒ</h3>
<div id="player-hand" class="hand"></div>

<button onclick="drawTile()">Ø§Ø³Ø­Ø¨ Ù‚Ø·Ø¹Ø©</button>

<script>
/* ===== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ===== */
let tiles=[];
let pile=[];
let board=[];
let left=null;
let right=null;

let playerHand=[];
let computerHand=[];
let selectedIndex=null;

let playerScore=0;
let computerScore=0;

/* ===== Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚Ø·Ø¹ ===== */
for(let i=0;i<=6;i++){
  for(let j=i;j<=6;j++){
    tiles.push([i,j]);
  }
}

/* ===== Ø®Ù„Ø· ===== */
tiles.sort(()=>Math.random()-0.5);

/* ===== ØªÙˆØ²ÙŠØ¹ ===== */
playerHand=tiles.splice(0,7);
computerHand=tiles.splice(0,7);
pile=tiles;

/* ===== Ø£Ø¯ÙˆØ§Øª ===== */
function canPlay(hand){
  if(left===null) return hand.length>0;
  return hand.some(([a,b]) =>
    a===left || a===right || b===left || b===right
  );
}

function sumHand(hand){
  return hand.reduce((s,[a,b])=>s+a+b,0);
}

function endGame(){
  const p=sumHand(playerHand);
  const c=sumHand(computerHand);
  let msg="Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©\n";
  if(p<c) msg+="ğŸ‰ Ø£Ù†Øª Ø§Ù„ÙØ§Ø¦Ø²";
  else if(c<p) msg+="ğŸ¤– Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙØ§Ø²";
  else msg+="ğŸ¤ ØªØ¹Ø§Ø¯Ù„";
  msg+=`\n\nÙ…Ø¬Ù…ÙˆØ¹Ùƒ: ${p}\nÙ…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±: ${c}`;
  alert(msg);
}

/* ===== Ø§Ù„Ù„Ø¹Ø¨ ===== */
function play(a,b){
  if(left===null){
    board.push([a,b]);
    left=a; right=b;
    return true;
  }
  if(a===right){
    board.push([a,b]);
    right=b;
    return true;
  }
  if(b===left){
    board.unshift([a,b]);
    left=a;
    return true;
  }
  return false;
}

/* ===== Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ ===== */
function playerTurn(){
  if(!canPlay(playerHand)){
    if(pile.length){
      alert("Ù…ÙÙŠØ´ Ù„Ø¹Ø¨ â€“ Ø§Ø³Ø­Ø¨ Ù‚Ø·Ø¹Ø©");
    }else{
      alert("Ù…ÙÙŠØ´ Ù„Ø¹Ø¨ â€“ ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¯ÙˆØ±");
      setTimeout(computerTurn,600);
    }
    return;
  }

  if(selectedIndex===null){
    alert("Ø§Ø®ØªØ§Ø± Ù‚Ø·Ø¹Ø©");
    return;
  }

  let [a,b]=playerHand[selectedIndex];
  if(play(a,b)||play(b,a)){
    playerHand.splice(selectedIndex,1);
    selectedIndex=null;
    renderAll();
    setTimeout(computerTurn,600);
  }else{
    alert("Ù‚Ø·Ø¹Ø© ØºÙŠØ± Ù…Ø·Ø§Ø¨Ù‚Ø©");
  }
}

/* ===== Ø¯ÙˆØ± Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ===== */
function computerTurn(){
  if(canPlay(computerHand)){
    for(let i=0;i<computerHand.length;i++){
      let [a,b]=computerHand[i];
      if(play(a,b)||play(b,a)){
        computerHand.splice(i,1);
        renderAll();
        return;
      }
    }
  }

  if(pile.length){
    computerHand.push(pile.shift());
    renderAll();
  }else{
    if(!canPlay(playerHand)){
      endGame();
    }
  }
}

/* ===== Ø³Ø­Ø¨ ===== */
function drawTile(){
  if(!pile.length){
    alert("Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙØ§Ø¶ÙŠ");
    return;
  }
  playerHand.push(pile.shift());
  renderAll();
}

/* ===== Ø±Ø³Ù… ===== */
function renderTile([a,b],hidden=false){
  let d=document.createElement("div");
  d.className="tile"+(hidden?" hidden":"");
  if(!hidden){
    d.innerHTML=`<div>${a}</div><div>${b}</div>`;
  }
  return d;
}

function renderAll(){
  boardDiv.innerHTML="";
  board.forEach(t=>boardDiv.appendChild(renderTile(t)));

  playerDiv.innerHTML="";
  playerHand.forEach((t,i)=>{
    let d=renderTile(t);
    if(i===selectedIndex) d.classList.add("selected");
    d.onclick=()=>{selectedIndex=i; renderAll();}
    playerDiv.appendChild(d);
  });

  computerDiv.innerHTML="";
  computerHand.forEach(()=>computerDiv.appendChild(renderTile([0,0],true)));

  leftPile.innerHTML="";
  rightPile.innerHTML="";
  pile.forEach(()=>{
    leftPile.appendChild(document.createElement("div")).className="pile-tile";
    rightPile.appendChild(document.createElement("div")).className="pile-tile";
  });
}

/* ===== Ø¹Ù†Ø§ØµØ± ===== */
const boardDiv=document.getElementById("board");
const playerDiv=document.getElementById("player-hand");
const computerDiv=document.getElementById("computer-hand");
const leftPile=document.getElementById("left-pile");
const rightPile=document.getElementById("right-pile");

renderAll();
</script>

</body>
</html>
