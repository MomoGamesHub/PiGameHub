<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PiGamesHub | Web3 Pro Edition</title>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <style>
        :root {
            --primary: #6741d9;
            --accent: #ffd700;
            --dark-bg: #05010a;
            --glow: 0 0 25px rgba(103, 65, 217, 0.6);
        }

        body {
            margin: 0;
            background: var(--dark-bg);
            color: white;
            font-family: 'Segoe UI', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        /* الخلفية المتموجة الفاخرة */
        .universe-bg {
            position: fixed;
            inset: 0;
            background: radial-gradient(circle at 50% 50%, #1a0b35 0%, #05010a 100%);
            z-index: -2;
        }

        .waves {
            position: fixed;
            width: 200%; height: 200%;
            background: radial-gradient(circle at 20% 30%, rgba(103, 65, 217, 0.1) 0%, transparent 40%);
            animation: rotateWaves 20s infinite linear;
            z-index: -1;
        }

        @keyframes rotateWaves {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        header {
            padding: 20px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(103, 65, 217, 0.3);
            position: sticky; top: 0; z-index: 1000;
        }

        .logo { font-size: 1.8rem; font-weight: 900; color: var(--accent); text-shadow: var(--glow); }

        .auth-btn {
            background: linear-gradient(45deg, var(--primary), #8e44ad);
            border: none; color: white; padding: 12px 28px; border-radius: 50px;
            font-weight: bold; cursor: pointer; transition: 0.4s;
            box-shadow: var(--glow);
        }

        .hero { text-align: center; padding: 40px 20px; }
        .hero h1 { font-size: 2.4rem; background: linear-gradient(to bottom, #fff, #888); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        /* شبكة الألعاب الـ 3D */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            padding: 20px;
            max-width: 550px;
            margin: auto;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 40px;
            padding: 30px 10px;
            text-align: center;
            transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(10px);
            cursor: pointer;
        }

        .game-card:hover {
            transform: translateY(-15px) scale(1.05);
            background: rgba(103, 65, 217, 0.15);
            border-color: var(--primary);
            box-shadow: 0 20px 40px rgba(0,0,0,0.6), var(--glow);
        }

        .game-card img {
            width: 110px; height: 110px;
            object-fit: contain;
            filter: drop-shadow(0 15px 20px rgba(0,0,0,0.5));
            animation: float 4s infinite ease-in-out;
            margin-bottom: 15px;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0); }
            50% { transform: translateY(-12px) rotate(3deg); }
        }

        .game-card span { display: block; font-weight: 800; font-size: 1.2rem; }

        /* واجهة الدومينو المتطورة */
        #domino-ui {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--dark-bg);
            z-index: 2000;
            flex-direction: column;
            padding: 20px;
        }

        #board {
            flex-grow: 1;
            background: radial-gradient(circle, #1a472a, #0d2616);
            border: 8px solid #3d2b1f;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            overflow: auto;
            padding: 40px;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.8);
        }

        #player-hand {
            height: 150px;
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 20px;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
        }

        .tile {
            width: 50px; height: 90px;
            background: #fdfdfd;
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            border: 3px solid #333;
            cursor: pointer;
            transition: 0.3s;
            flex-shrink: 0;
        }

        .tile:hover { transform: translateY(-20px); box-shadow: 0 0 20px var(--accent); }
        .tile-part { flex: 1; color: black; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 900; }
        .tile-part:first-child { border-bottom: 3px solid #333; }

        .back-btn {
            position: absolute; top: 20px; left: 20px;
            background: #e74c3c; color: white; border: none;
            padding: 10px 20px; border-radius: 10px; font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="universe-bg"></div>
    <div class="waves"></div>

    <header>
        <div class="logo">PiGamesHub</div>
        <button class="auth-btn" id="user-btn" onclick="piAuth()">اتصال المحفظة</button>
    </header>

    <div id="main-interface">
        <section class="hero">
            <h1>مرحباً بك يا رائد</h1>
            <p>منصة الويب 3 الأكثر انسيابية على شبكة Pi</p>
        </section>

        <div class="games-grid">
            <div class="game-card" onclick="openGame('Domino')">
                <img src="domino.png.png" alt="دومينو">
                <span>دومينو</span>
            </div>
            <div class="game-card" onclick="alert('قريباً')">
                <img src="chess.png.png" alt="شطرنج">
                <span>شطرنج</span>
            </div>
            <div class="game-card" onclick="alert('قريباً')">
                <img src="ludo.png.png" alt="لودو">
                <span>لودو</span>
            </div>
            <div class="game-card" onclick="alert('قريباً')">
                <img src="cards.png.png" alt="كوتشينة">
                <span>كوتشينة</span>
            </div>
            <div class="game-card" onclick="alert('قريباً')">
                <img src="tawla31.png.png" alt="طاولة">
                <span>طاولة 31</span>
            </div>
            <div class="game-card" onclick="alert('قريباً')">
                <img src="nerd.png.png" alt="نرد">
                <span>النرد</span>
            </div>
        </div>
    </div>

    <div id="domino-ui">
        <button class="back-btn" onclick="closeGame()">خروج</button>
        <div id="board"></div>
        <div id="player-hand"></div>
    </div>

    <script>
        const Pi = window.Pi;
        Pi.init({ version: "2.0", sandbox: true });

        async function piAuth() {
            try {
                const auth = await Pi.authenticate(['username'], (p)=>{});
                document.getElementById('user-btn').innerText = auth.user.username;
            } catch (e) { alert("افتح من Pi Browser"); }
        }

        // منطق الدومينو
        let hand = [];

        function openGame(name) {
            if(name === 'Domino') {
                document.getElementById('domino-ui').style.display = 'flex';
                startDomino();
            }
        }

        function closeGame() {
            document.getElementById('domino-ui').style.display = 'none';
        }

        function startDomino() {
            const handDiv = document.getElementById('player-hand');
            const board = document.getElementById('board');
            handDiv.innerHTML = ""; board.innerHTML = "";
            hand = [];

            // توزيع 7 قطع احترافية
            for(let i=0; i<7; i++) {
                let v1 = Math.floor(Math.random()*7);
                let v2 = Math.floor(Math.random()*7);
                hand.push([v1, v2]);
            }
            drawHand();
        }

        function drawHand() {
            const handDiv = document.getElementById('player-hand');
            handDiv.innerHTML = "";
            hand.forEach((t, i) => {
                const d = document.createElement('div');
                d.className = 'tile';
                d.innerHTML = `<div class="tile-part">${t[0]}</div><div class="tile-part">${t[1]}</div>`;
                d.onclick = () => play(i);
                handDiv.appendChild(d);
            });
        }

        function play(i) {
            const t = hand[i];
            const board = document.getElementById('board');
            const d = document.createElement('div');
            d.className = 'tile';
            d.style.transform = "rotate(90deg)"; // وضع اللعب
            d.innerHTML = `<div class="tile-part">${t[0]}</div><div class="tile-part">${t[1]}</div>`;
            board.appendChild(d);
            hand.splice(i, 1);
            drawHand();
        }
    </script>
</body>
</html>
