<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>PiGameHub - Domino Full Deck</title>

<style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: #0f111a;
  color: #fff;
  text-align: center;
  margin: 0;
  padding: 0;
}

h2 { color: #ffd700; margin-top: 15px; }

#user { margin: 10px; font-size: 18px; color: #4ed8a2; font-weight: bold; }

#score { font-size: 20px; margin: 10px; font-weight: bold; color: #fff; }

#board { display: flex; justify-content:center; gap:12px; min-height:100px; margin:20px auto; padding:10px; background:#1c1f33; border-radius:15px; width:fit-content; }

.domino {
  width: 70px; height: 140px; border-radius:8px;
  background:#fff; border:2px solid #4ed8a2;
  display:flex; flex-direction:column; justify-content:center;
  cursor:pointer; box-shadow:2px 2px 8px rgba(0,0,0,0.4);
  transition: transform 0.2s;
}

.domino:hover { transform: scale(1.1); }

button { padding:10px 20px; font-size:16px; margin:5px; border:none; border-radius:8px; background:#4ed8a2; color:#000; cursor:pointer; font-weight:bold; transition: background 0.2s; }
button:hover { background:#37b383; }

#message { margin-top: 15px; font-size: 16px; height: 24px; }
.success { color: #4ed8a2; }
.error { color: #ff4c4c; }
</style>
</head>

<body>
<h2>ğŸ² Domino - PiGameHub</h2>
<div id="user">ğŸ‘¤ Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ!</div>
<div id="score">â­ Ø§Ù„Ù†Ù‚Ø§Ø·: 0</div>
<div id="board"></div>

<button onclick="playerDraw()">Ø³Ø­Ø¨ Ù‚Ø·Ø¹Ø©</button>
<button onclick="resetGame()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>

<div id="message"></div>

<script>
// --- Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ---
let deck = [];
let playerHand = [];
let computerHand = [];
let pile = [];
let leftValue = null;
let rightValue = null;
let score = 0;

// --- Ø§Ù†Ø´Ø§Ø¡ Deck ÙƒØ§Ù…Ù„ 28 Ù‚Ø·Ø¹Ø© ---
function createDeck() {
  deck = [];
  for (let i = 0; i <= 6; i++) {
    for (let j = i; j <= 6; j++) {
      deck.push([i,j]);
    }
  }
  shuffle(deck);
}

// --- Ø®Ù„Ø· Ø§Ù„Ù‚Ø·Ø¹ ---
function shuffle(array) {
  for (let i = array.length -1; i>0; i--){
    const j = Math.floor(Math.random() * (i+1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

// --- ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù‚Ø·Ø¹ ---
function deal() {
  playerHand = deck.splice(0,7);
  computerHand = deck.splice(0,7);
  pile = deck.splice(0); // Ø§Ù„Ø¨Ø§Ù‚ÙŠ 14 Ù‚Ø·Ø¹Ø©
}

// --- ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ù‚Ø§Ø· ---
function updateScore() {
  document.getElementById("score").textContent = "â­ Ø§Ù„Ù†Ù‚Ø§Ø·: " + score;
}

// --- Ø±Ø³Ø§Ù„Ø© Ù…Ø¤Ù‚ØªØ© ---
function showMessage(text,type){
  const msg = document.getElementById("message");
  msg.textContent = text;
  msg.className = type;
  setTimeout(()=> msg.textContent="",2000);
}

// --- Ø±Ø³Ù… Ù‚Ø·Ø¹Ø© ---
function renderDomino(domino) {
  domino.innerHTML = `
    <div style="flex:1; display:flex; justify-content:center; align-items:center; font-size:28px; font-weight:bold; color:#333; border-bottom:2px solid #4ed8a2;">${domino.dataset.a}</div>
    <div style="flex:1; display:flex; justify-content:center; align-items:center; font-size:28px; font-weight:bold; color:#333;">${domino.dataset.b}</div>
  `;
}

// --- Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ù‚Ø·Ø¹Ø© ---
function createDominoElement(a,b){
  const domino = document.createElement("div");
  domino.className="domino";
  domino.dataset.a=a;
  domino.dataset.b=b;
  renderDomino(domino);
  // ØªØ¯ÙˆÙŠØ± Ø§Ù„Ù‚Ø·Ø¹Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·
  domino.onclick=()=>{
    [domino.dataset.a,domino.dataset.b] = [domino.dataset.b,domino.dataset.a];
    renderDomino(domino);
    showMessage("ğŸ”„ ØªÙ… ØªØ¯ÙˆÙŠØ± Ø§Ù„Ù‚Ø·Ø¹Ø©","success");
  };
  return domino;
}

// --- Ø³Ø­Ø¨ Ù‚Ø·Ø¹Ø© Ù„Ù„Ø§Ø¹Ø¨ (Ø­Ø§Ù„ÙŠØ§Ù‹ Ø¨Ø³ÙŠØ·Ø© Ù…Ù† Ø§Ù„ÙŠØ¯) ---
function playerDraw(){
  if(playerHand.length===0){
    showMessage("âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù‚Ø·Ø¹ Ù…ØªØ§Ø­Ø©","error");
    return;
  }
  const [a,b] = playerHand.shift();
  const domino = createDominoElement(a,b);
  document.getElementById("board").appendChild(domino);
  score++;
  updateScore();
  showMessage("âœ… Ù‚Ø·Ø¹Ø© Ù†Ø²Ù„Øª","success");
}

// --- Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© ---
function resetGame(){
  document.getElementById("board").innerHTML="";
  leftValue=null; rightValue=null;
  score=0; updateScore();
  createDeck();
  deal();
  showMessage("ğŸ” Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø© â€” Ø§Ù„Ù†Ù‚Ø§Ø· ØµÙØ±","success");
}

// --- Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© ---
createDeck();
deal();
updateScore();
</script>
</body>
</html>
