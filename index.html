<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PiGamesHub | Pioneer Official</title>
    <style>
        :root { --p-purple: #6741d9; --pi-gold: #ffd700; --dark-bg: #05010a; --green: #0a3d1d; }
        body, html { margin: 0; padding: 0; background: var(--dark-bg); color: white; font-family: 'Segoe UI', sans-serif; height: 100vh; overflow: hidden; }
        
        /* الهيدر الاحترافي */
        header { padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.5); }
        .pi-brand { color: var(--pi-gold); font-weight: 900; font-size: 1.4rem; }
        .auth-btn { 
            background: linear-gradient(45deg, var(--p-purple), #512da8); 
            border: 2px solid var(--pi-gold); color: white; padding: 10px 20px; 
            border-radius: 30px; cursor: pointer; font-weight: bold;
            box-shadow: 0 0 15px rgba(103, 65, 217, 0.4); transition: 0.3s;
        }
        .auth-btn:hover { transform: scale(1.05); box-shadow: 0 0 20px var(--pi-gold); }

        /* حاوية الألعاب (مطابقة لصورك) */
        .hub { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; max-width: 400px; margin: 40px auto; padding: 20px; background: rgba(255,255,255,0.02); border-radius: 25px; border: 1px solid rgba(255,255,255,0.05); }
        .game-box { background: #1a1a1a; border-radius: 20px; padding: 15px; text-align: center; border: 1px solid #333; cursor: pointer; transition: 0.3s; }
        .game-box:hover { border-color: var(--pi-gold); background: #222; }
        .game-box img { width: 60px; height: 60px; margin-bottom: 10px; }

        /* محرك الدومينو الثعباني */
        #game-table { display: none; position: fixed; inset: 0; background: radial-gradient(circle, var(--green), #051a0d); flex-direction: column; }
        .board-area { flex: 1; position: relative; padding: 40px; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        
        /* تصميم القطعة الاحترافية */
        .domino-tile {
            width: 36px; height: 72px; background: #fdfdfd; border-radius: 4px; border: 2px solid #222;
            display: flex; flex-direction: column; box-shadow: 3px 3px 10px rgba(0,0,0,0.5);
            transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); flex-shrink: 0;
        }
        .half { flex: 1; display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr); padding: 3px; gap: 2px; }
        .dot { background: #000; border-radius: 50%; width: 5px; height: 5px; visibility: hidden; margin: auto; }
        
        /* توزيع النقاط */
        .v1 .d5, .v3 .d5, .v5 .d5 { visibility: visible; }
        .v2 .d1, .v2 .d9, .v3 .d1, .v3 .d9, .v4 .d1, .v4 .d3, .v4 .d7, .v4 .d9, .v5 .d1, .v5 .d3, .v5 .d7, .v5 .d9, .v6 .d1, .v6 .d3, .v6 .d4, .v6 .d6, .v6 .d7, .v6 .d9 { visibility: visible; }

        /* منطقة الرص (Snake Path) */
        #snake-container { display: flex; align-items: center; gap: 4px; flex-wrap: wrap; justify-content: center; max-width: 90%; }
        .rotated { transform: rotate(90deg); }

        /* واجهة اليد السفلى */
        #hand { height: 120px; background: rgba(0,0,0,0.85); display: flex; justify-content: center; align-items: center; gap: 12px; border-top: 2px solid var(--pi-gold); }
    </style>
</head>
<body>

    <div id="main-view">
        <header>
            <div class="pi-brand">PiGamesHub</div>
            <button class="auth-btn" onclick="login()">تسجيل دخول $\pi$</button>
        </header>
        <div class="hub">
            <div class="game-box" onclick="showLobby()"><img src="domino.png.png"><div>دومينو</div></div>
            <div class="game-box"><img src="chess.png.png"><div>شطرنج</div></div>
            <div class="game-box"><img src="ludo.png.png"><div>لودو</div></div>
            <div class="game-box"><img src="cards.png.png"><div>كوتشينة</div></div>
            <div class="game-box"><img src="tawla31.png.png"><div>طاولة 31</div></div>
            <div class="game-box"><img src="nerd.png.png"><div>النرد</div></div>
        </div>
    </div>

    <div id="game-table">
        <div style="padding:10px; background:#111; display:flex; justify-content:space-between; align-items:center;">
            <button onclick="location.reload()" style="background:none; border:1px solid red; color:red; padding:4px 12px; border-radius:8px;">خروج</button>
            <span id="status" style="color:var(--pi-gold)">دورك الآن</span>
        </div>
        <div class="board-area">
            <div id="snake-container"></div>
        </div>
        <div id="hand"></div>
    </div>

    <script>
        let myHand = [], boardTiles = [], turn = 0;

        function showLobby() { 
            // لبساطة الكود هنا، سننتقل للعب مباشرة بضغطة واحدة كما في صورتك الاحترافية
            document.getElementById('main-view').style.display = 'none';
            document.getElementById('game-table').style.display = 'flex';
            initGame();
        }

        function createTileUI(v1, v2, isRotated = true) {
            let dotsHTML = '<div class="dot d1"></div><div class="dot d2"></div><div class="dot d3"></div><div class="dot d4"></div><div class="dot d5"></div><div class="dot d6"></div><div class="dot d7"></div><div class="dot d8"></div><div class="dot d9"></div>';
            return `
                <div class="domino-tile ${isRotated ? 'rotated' : ''}">
                    <div class="half v${v1}">${dotsHTML}</div>
                    <div style="height:2px; background:#ccc; margin:0 4px;"></div>
                    <div class="half v${v2}">${dotsHTML}</div>
                </div>`;
        }

        function initGame() {
            let deck = [];
            for(let i=0; i<=6; i++) for(let j=i; j<=6; j++) deck.push([i, j]);
            deck.sort(() => Math.random() - 0.5);
            myHand = deck.splice(0, 7);
            renderHand();
        }

        function renderHand() {
            const handDiv = document.getElementById('hand');
            handDiv.innerHTML = "";
            myHand.forEach((t, i) => {
                let div = document.createElement('div');
                div.innerHTML = createTileUI(t[0], t[1], false); // في اليد تكون رأسية
                div.onclick = () => playTile(i);
                handDiv.appendChild(div);
            });
        }

        function playTile(idx) {
            let tile = myHand[idx];
            if(boardTiles.length === 0) {
                boardTiles.push(tile);
            } else {
                let L = boardTiles[0][0], R = boardTiles[boardTiles.length-1][1];
                if(tile.includes(L)) boardTiles.unshift(tile[1] === L ? tile : [tile[1], tile[0]]);
                else if(tile.includes(R)) boardTiles.push(tile[0] === R ? tile : [tile[1], tile[0]]);
                else return alert("لا يمكن لعب هذه القطعة!");
            }
            myHand.splice(idx, 1);
            renderBoard();
            renderHand();
        }

        function renderBoard() {
            const boardDiv = document.getElementById('snake-container');
            boardDiv.innerHTML = "";
            boardTiles.forEach((t, i) => {
                let div = document.createElement('div');
                // خوارزمية الرص: إذا كانت القطعة "دوش" (مثلاً 6-6) توضع رأسية، وغير ذلك توضع أفقية
                let isDouble = (t[0] === t[1]);
                div.innerHTML = createTileUI(t[0], t[1], !isDouble);
                boardDiv.appendChild(div);
            });
        }

        function login() { alert("تم الاتصال بـ Pi Network بنجاح"); }
    </script>
</body>
</html>
